# 关于此项

尝试使用脚本完成网络Portal认证。

## 使用

```
python main.py 账号 密码
```

## 说明

由于本人使用的是中国移动的账号，所以测试以移动账号为准。

## 分析

该系统为深澜Portal网络认证系统。

系统的认证过程相对宽松，没有增设严格的Header校验、频繁请求限制，所有API均采用GET形式发送，且JS没有混淆加密。

对于本脚本而言难点在于参数的生成。

## 重要参数

| 参数       | 描述                                           |
| -------- | -------------------------------------------- |
| callback | 不参与后台逻辑运算，无实际意义                              |
| token    | 通过cgi-bin/get_challenge获取其token且后台记录有效期60秒   |
| md5      | 以token为key，password为value来计算得到的MD5值          |
| chksum   | 以复数的参数为value，计算sha1值                         |
| ac_id    | 控制不同的登录模式，需要适当的调整                            |
| info     | 以用户信息为对象，token为key，在自定义函数编码后进行一次非标准的base64编码 |

其中i参数需要将JS函数转换为Python函数，这两个函数引用于网络。

## TodoList

- [x] 宿舍区上网
- [x] 教学区上网
